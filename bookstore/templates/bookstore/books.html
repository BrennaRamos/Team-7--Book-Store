{% extends 'base.html'%}
{% block content %}
{% load staticfiles %}

<head>
<style>
p.ex1 {
  border: 1px solid grey; 
  padding: 35px;
}

p.ex2 {
  border: 1px solid grey; 
  margin-left: 35px;
}

</style>
</head>

<script type="text/javascript">

    function resizeImage(id) {
        var img = document.getElementById("img_"+id);
        if(img.style.height ==="100%") {
            img.style.height = "170px";
            img.style.width = "100px";
        } else {
            img.style.height = "100%";
            img.style.width = "100%";
        }
    }
</script>

<button type="button">Sort by Title</button>
<button type="button">Sort by Author</button>
<button type="button">Sort by Price</button> 
<button type="button">Sort by Rating</button> 
<button type="button">Sort by Publish Date</button> 

<div class="pagination">
    <span class="step-links">
        {% if books.has_previous %}
            <a href="?page={{ books.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ books.number }} of {{ books.paginator.num_pages }}.
        </span>

        {% if books.has_next %}
            <a href="?page={{ books.next_page_number }}">next</a>
        {% endif %}
    </span>
</div>

<ul class="list-group"></ul>

{% for book in books %}

<li class="list-group-item">
<p class="ex1">
    <img id="img_{{ forloop.counter }}" src="{{ book.photo.url }}" width=100 height=170 onclick="resizeImage({{ forloop.counter }})"> 
	<br>
	<span class="font-weight-bold">
                    {{ book.title }}
                </span>
<br>
    by {{ book.author }}
<br>   {{ book.genre }}
<br>
        Published on {{ book.datePublished }}
<br>
	<span class="font-weight-bold">
	${{ book.price }}
		</span>
   
    <br>
    <!--CHECK REVIEWS LINK. Once clicked it redirects user to the reviews page for that specific book-->
    <a href="{% url 'reviews' book.id book.title %}">Check Reviews</a>
    <br>
    <!--ADD TO CART LINK. Once clicked it adds item to cart but "redirects" user to whatever page they were currently on/clicked from-->
    <a href="{% url 'addtocart' book.id %}?from={{request.path|urlencode}}">Add to Cart</a>
    {% if user.is_authenticated %}
    <br> Add to Wishlists:
    <a href="{% url 'addtowish' book.id 0 %}?from={{request.path|urlencode}}">#1</a>, 
    <a href="{% url 'addtowish' book.id 1 %}?from={{request.path|urlencode}}">#2</a>, 
    <a href="{% url 'addtowish' book.id 2 %}?from={{request.path|urlencode}}">#3</a>
    {% endif  %}
</p>
</li>

{% endfor %}

</ul>

{% endblock content %}